(function(){if(window.MCAPTURE_ProvisioningAborted){return}var a=window.ctAppCache;if(f===undefined){var f=function(p){if(typeof(log)!=="undefined"){log.debug(p)}else{console.info(p)}}}if(l===undefined){var l=function(p){if(typeof(log)!=="undefined"){log.debug(p)}else{console.info(p)}}}if(n===undefined){var n=function(p){if(typeof(log)!=="undefined"){log.error(p)}else{console.error(p)}alert(p)}}function o(p){}function m(p){l("Update Cache Cached Event:");o(p)}function c(p){l("Update Cache Checking Event:");o(p)}function g(p){l("Update Cache Downloading Event:");o(p)}function b(p){l("Update Cache Error Event:");o(p)}function k(p){l("Update Cache Obsolete Event:");o(p)}function i(p){l("Update Cache NoUpdate Event:");o(p)}function h(p){l("Update Cache Progress Event:");o(p)}function j(q){l("Update Cache Ready Event:");o(q);function p(){function r(s){log.debug("On our way home to "+s)}l("Update Cache Ready Reload");window.MCAPTURE_Provisioning_Processes=true;if(typeof(mCapture)!=="undefined"){l("Calling mCapture.fl.gotoprovisioningurl");mCapture.fl.gotoprovisioningurl(r)}else{l("Changing location to ../../index.html");window.locationUtils.setHref("../../index.html")}}try{l("Update Cache Event: Status = "+a.status);if(a.status==4){a.swapCache();o("Update Cache Event: Swapped - Status = "+a.status);mCapture.fl.msgboxasync(p,"New process versions have been downloaded, the application will now be reloaded");return}}catch(q){l("Update Cache Event Swap: Error = "+q.toString());mCapture.fl.msgboxasync(p,"New process versions have been downloaded but could not be activated, the application will now be reloaded");return}}var d=MCAPTURE_CFG.isTesting;window.localStorage.setItem("isTesting",d==="yes"?"yes":"no");var e=mCapture.db.getUserInfo();if(e.mSuiteUserName===""&&MCAPTURE_CFG.mSuiteUserName!==""){e.mSuiteUserName=MCAPTURE_CFG.mSuiteUserName;e.mSuiteSerialNo=MCAPTURE_CFG.mcId;e.mSuiteGroupId=MCAPTURE_CFG.mSuiteGroupId;e.mSuiteGroupName=MCAPTURE_CFG.mSuiteGroupName;mCapture.db.setUserInfo(e)}if(a){a.addEventListener("checking",c,false);a.addEventListener("downloading",g,false);a.addEventListener("noupdate",i,false);a.addEventListener("updateready",j,false);a.addEventListener("progress",h,false);a.addEventListener("cached",m,false);a.addEventListener("error",b,false);a.addEventListener("obsolete",k,false);j()}else{l("Load Launch Page : No Cache")}})();